<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>eMercado - Información de producto</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <!-- Font Awesome (tu proyecto ya lo usa) -->
  <link href="css/font-awesome.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
</head>

<body>
  <!-- NAVBAR (mantiene el email del usuario) -->
  <header>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark p-1" aria-label="Barra de navegación principal">
      <div class="container">
        <a class="navbar-brand" href="index.html">eMercado</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item"><a class="nav-link" href="categories.html">Categorías</a></li>
            <li class="nav-item"><a class="nav-link" href="products.html">Productos</a></li>
            <li class="nav-item"><a class="nav-link active" aria-current="page" href="#">Detalle</a></li>
          </ul>
          <span class="navbar-text text-white small">
            <i class="fa fa-user-circle-o me-1" aria-hidden="true"></i>
            <span id="usuarioActual">usuario@ejemplo.com</span>
          </span>
        </div>
      </div>
    </nav>
  </header>

  <main class="container my-4">
    <!-- Encabezado del producto -->
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
      <div>
        <h1 id="productName" class="h3 mb-1">Nombre del producto</h1>
        <div class="text-muted">
          <span id="productCategory">Categoría</span> ·
          <span id="productSoldCount">0 vendidos</span>
        </div>
      </div>
      <div class="text-end">
        <div id="productCostBig" class="h3 mb-0">USD 0</div>
      </div>
    </div>

    <!-- Galería -->
    <div class="row g-4">
      <div class="col-12 col-lg-6">
        <div class="card shadow-sm">
          <img id="imageMain" class="card-img-top" src="" alt="Imagen del producto">
          <div class="card-body">
            <div id="thumbs" class="d-flex flex-wrap gap-2"></div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-6">
        <div class="card shadow-sm h-100">
          <div class="card-body">
            <h2 class="h5">Descripción</h2>
            <p id="productDescription" class="mb-3">—</p>
            <hr>
            <dl class="row mb-0">
              <dt class="col-4">Precio</dt>
              <dd class="col-8 mb-2"><span id="productCost">USD 0</span></dd>
              <dt class="col-4">Moneda</dt>
              <dd class="col-8 mb-2"><span id="productCurrency">USD</span></dd>
            </dl>
          </div>
        </div>
      </div>
    </div>

    <!-- Productos relacionados -->
    <section class="mt-5">
      <h3 class="h5 mb-3">Productos relacionados</h3>
      <div id="relatedProducts" class="row g-3"></div>
    </section>

    <!-- Comentarios + Formulario -->
    <section class="mt-5">
      <h3 class="h5 mb-3">Comentarios</h3>

      <!-- Resumen de calificaciones con barras de progreso -->
      <div id="rating-summary" class="card p-3 mb-3 shadow-sm">
        <div class="d-flex align-items-center gap-3 mb-3">
          <span id="avgScore" class="display-6 fw-bold">0.0</span>
          <div id="avgStars" class="fs-4" aria-label="promedio en estrellas"></div>
          <small id="ratingsCount" class="text-muted">(0 calificaciones)</small>
        </div>
        <div id="ratingBars" class="vstack gap-2"></div>
      </div>

      <!-- Lista de comentarios -->
      <div id="comments-container" class="list-group mb-3"></div>

      <!-- Formulario de nueva reseña -->
      <form id="add-comment" class="card p-3 shadow-sm" novalidate>
        <div class="mb-2">
          <label for="comment-text" class="form-label">Tu comentario</label>
          <textarea id="comment-text" class="form-control" rows="3" placeholder="Escribe aquí..." required></textarea>
          <div class="invalid-feedback">Por favor, escribe un comentario.</div>
        </div>
        <div class="mb-3">
          <label for="comment-score" class="form-label">Puntuación</label>
          <select id="comment-score" class="form-select" required>
            <option value="5">5 ★★★★★</option>
            <option value="4">4 ★★★★☆</option>
            <option value="3">3 ★★★☆☆</option>
            <option value="2">2 ★★☆☆☆</option>
            <option value="1">1 ★☆☆☆☆</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">
          <i class="fa fa-paper-plane" aria-hidden="true"></i> Enviar
        </button>
      </form>
    </section>
  </main>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <script src="js/common.js"></script>
  <script src="js/init.js"></script>
  <script src="js/product-info.js"></script>
</body>
</html>